{"version":3,"sources":["scripts/main.js"],"names":["current","peopleList","document","querySelector","children","propertyNames","map","el","innerText","toLowerCase","propertyList","forEach","index","push","name","textContent","position","office","age","salary","replace","id","key","addEventListener","e","sort","a","b","localeCompare","target","reverse","undefined","newPeopleList","i","length","append","clickEvent","cellIndex","classList","remove","parentElement","add","insertAdjacentHTML","newValue","initialValue","pushNotification","description","type","notification","createElement","innerHTML","style","top","right","setTimeout","form","inputs","querySelectorAll","saveEdit","condition","childNodes","editRowId","rowIndex","editCell","value","Number","toLocaleString","submitEvent","preventDefault","some","input","newPerson","lastChild","reset","targetText","option","setAttribute","contains"],"mappings":"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","file":"main.c63b3153.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst peopleList = [...document.querySelector('tbody').children];\nconst propertyNames = [...document.querySelector('tr').children].map(\n  el => el.innerText.toLowerCase());\nlet propertyList = [];\n\npeopleList.forEach((el, index) => {\n  propertyList.push({\n    name: el.children[0].textContent,\n    position: el.children[1].textContent,\n    office: el.children[2].textContent,\n    age: +el.children[3].textContent,\n    salary: +el.children[4].textContent.replace(/\\D/g, ''),\n    id: index,\n  });\n});\n\nlet current;\n\n[...document.querySelector('tr').children].forEach((el, index) => {\n  const key = propertyNames[index];\n\n  el.addEventListener('click', (e) => {\n    propertyList = propertyList.sort((a, b) => {\n      if (typeof a[key] === 'number') {\n        return a[key] - b[key];\n      }\n\n      return a[key].localeCompare(b[key]);\n    });\n\n    if (current === e.target) {\n      propertyList = propertyList.reverse();\n    }\n\n    if (!current) {\n      current = e.target;\n    } else {\n      current = undefined;\n    }\n\n    const newPeopleList = [];\n\n    for (let i = 0; i < peopleList.length; i++) {\n      newPeopleList.push(peopleList[propertyList[i].id]);\n    }\n\n    document.querySelector('tbody').append(...newPeopleList);\n  });\n});\n\ndocument.querySelector('tbody').addEventListener('click', (clickEvent) => {\n  if (clickEvent.target.cellIndex) {\n    [...document.querySelector('tbody').children].forEach(el => {\n      el.classList.remove('active');\n    });\n  }\n\n  clickEvent.target.parentElement.classList.add('active');\n});\n\ndocument.querySelector('body').insertAdjacentHTML('beforeend', `\n  <form action=\"#\" class=\"new-employee-form\">\n    <label>Name: <input type=\"text\" data-qa=\"name\"></label>\n    <label>Position: <input type=\"text\"  data-qa=\"position\"></label>\n    <label>Office:\n      <select name=\"office\" data-qa=\"office\">\n      <option value=\"Tokyo\">Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    </select></label>\n    <label>\n    Age: <input type=\"number\" data-qa=\"age\"></label>\n    <label>Salary: <input type=\"number\" data-qa=\"salary\"></label>\n    <button type=\"submit\">Save to table</button>\n  </form>\n`);\n\nconst pushNotification = (description, type) => {\n  const notification = document.createElement('section');\n\n  notification.innerHTML = `\n    <h2 class=\"title\">${type === 'error' ? 'Error' : 'Success'}</h2>\n    <p>${description}</p>\n  `;\n  notification.classList.add('notification', type);\n  notification.style.top = `${10}px`;\n  notification.style.right = `${10}px`;\n  document.querySelector('body').append(notification);\n\n  setTimeout(() => {\n    notification.remove();\n  }, 2000);\n};\n\nconst form = document.querySelector('form');\nconst inputs = [...document.querySelectorAll('input')];\n\nform.addEventListener('submit', (submitEvent) => {\n  submitEvent.preventDefault();\n\n  if (inputs.some(input => input.value.length === 0)) {\n    pushNotification('All fields must be filled', 'error');\n\n    return;\n  }\n\n  if (inputs[0].value.length < 4) {\n    pushNotification('Name must consist of at least 4 characters', 'error');\n\n    return;\n  }\n\n  if (+inputs[2].value < 18 || +inputs[2].value > 90) {\n    pushNotification('Age must be between 18 and 90', 'error');\n\n    return;\n  }\n\n  const newPerson = document.createElement('tr');\n\n  newPerson.innerHTML = `\n    <td>${form.children[0].lastChild.value}</td>\n    <td>${form.children[1].lastChild.value}</td>\n    <td>${form.children[2].lastChild.value}</td>\n    <td>${form.children[3].lastChild.value}</td>\n    <td>$${Number(\n    form.children[4].lastChild.value).toLocaleString('en-US')}</td>\n  `;\n\n  document.querySelector('tbody').append(newPerson);\n  peopleList.push(newPerson);\n\n  propertyList.push({\n    name: form.children[0].lastChild.value,\n    position: form.children[1].lastChild.value,\n    office: form.children[2].lastChild.value,\n    age: +form.children[3].lastChild.value,\n    salary: +form.children[3].lastChild.value,\n    id: propertyList.length,\n  });\n\n  form.reset();\n  pushNotification('Added to the table', 'success');\n});\n\nlet newValue;\nlet initialValue;\n\ndocument.querySelector('tbody').addEventListener('dblclick', (clickEvent) => {\n  const targetText = clickEvent.target.innerText;\n\n  initialValue = clickEvent.target.cellIndex !== 4\n    ? targetText\n    : targetText.replace(/\\D/g, '');\n\n  clickEvent.target.classList.add('edit');\n\n  if (clickEvent.target.cellIndex === 2) {\n    clickEvent.target.innerHTML = `\n    <select name=\"age\" value=\"${targetText}\" class=\"cell-input edit\">\n      <option value=\"Tokyo\">Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    </select>\n    `;\n\n    [...clickEvent.target.children[0].children].forEach(option => {\n      if (option.value === initialValue) {\n        option.setAttribute('selected', 'true');\n      }\n    });\n  } else if (clickEvent.target.cellIndex > 2) {\n    clickEvent.target.innerHTML = `\n    <input type=\"number\" class=\"cell-input edit\" value=\"${\n  targetText.replace(/\\D/g, '')}\">\n    `;\n  } else {\n    clickEvent.target.innerHTML = `\n    <input type=\"text\" class=\"cell-input edit\" value=\"${\n  targetText}\">\n    `;\n  }\n});\n\nfunction saveEdit(condition) {\n  if (condition) {\n    [...document.querySelectorAll('td')].forEach(el => {\n      if (el.childNodes.length === 3) {\n        const editRowId = el.parentElement.rowIndex - 1;\n        const editCell = el.cellIndex;\n\n        el.classList.remove('edit');\n\n        newValue = el.children[0].value.length\n          ? el.children[0].value\n          : initialValue;\n\n        if (editCell === 0 && newValue.length < 4) {\n          newValue = initialValue;\n\n          pushNotification(\n            'Name must consist of at least 4 characters', 'error');\n        }\n\n        if (editCell === 3 && (newValue < 18 || newValue > 90)) {\n          newValue = initialValue;\n\n          pushNotification('Age must be between 18 and 90', 'error');\n        }\n\n        if (editCell === 4) {\n          newValue = `$${Number(newValue).toLocaleString()}`;\n        }\n\n        switch (el.cellIndex) {\n          case 0:\n            propertyList[editRowId].name = newValue;\n            break;\n\n          case 1:\n            propertyList[editRowId].position = newValue;\n            break;\n\n          case 2:\n            propertyList[editRowId].office = newValue;\n            break;\n\n          case 3:\n            propertyList[editRowId].age = +newValue;\n            break;\n\n          default:\n            propertyList[editRowId].salary = +newValue.replace(/\\D/g, '');\n        }\n\n        el.innerHTML = `\n        ${newValue}\n      `;\n      } else {\n        el.innerHTML = `\n        ${el.innerText}\n      `;\n      }\n    });\n  }\n}\n\ndocument.querySelector('body').addEventListener('click', (clickEvent) => {\n  saveEdit(!clickEvent.target.classList.contains('edit'));\n});\n\ndocument.querySelector('body').addEventListener('keypress', (clickEvent) => {\n  saveEdit(clickEvent.key === 'Enter');\n});\n"]}